{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { nanoid } from 'nanoid';\nexport default {\n  name: 'Test',\n  data() {\n    return {\n      radio1: \"get\",\n      radio2: \"built-in\",\n      get_key_value: [{\n        id: nanoid(),\n        key: \"k1\",\n        value: \"v1\"\n      }],\n      inputarea: \"\",\n      tableData: [],\n      userInfo: {\n        password: \"123456\",\n        username: \"root\"\n      },\n      pk: 1,\n      chooseToken: \"useToken\"\n    };\n  },\n  mounted: {},\n  methods: {\n    oprKV(type) {\n      const len = this.get_key_value.length + 1;\n      if (type === 'add') {\n        this.get_key_value.push({\n          id: nanoid(),\n          key: `k${len}`,\n          value: `v${len}`\n        });\n      } else {\n        this.get_key_value.pop(-1);\n      }\n      // console.log( this.$refs[`input${this.get_key_value[0].id}`])\n      // Object.values(this.$refs)[1].focus()\n      this.$nextTick(() => {\n        this.$refs[`input${this.get_key_value[len - 1].id}`][0].focus();\n      });\n    },\n    async send() {\n      if (this.radio1 === 'get') {\n        let getInfo = \"\";\n        this.get_key_value.forEach((value, index, array) => {\n          getInfo += `${value.key}=${value.value}&`;\n        });\n        getInfo = getInfo.slice(0, getInfo.length - 1);\n        console.log(getInfo);\n        await this.$ajax.get(`/test/son?${getInfo}`).then(res => {\n          console.log(res.data.data);\n          this.inputarea = res.data.data;\n        }).catch(err => {\n          console.log(err);\n        });\n      } else {\n        let getInfo = {};\n        this.get_key_value.forEach((value, index, array) => {\n          getInfo[value.key] = value.value;\n        });\n        console.log(getInfo);\n        await this.$ajax.post('/test/son/', getInfo).then(res => {\n          console.log(res.data.data);\n          this.inputarea = res.data.data;\n        }).catch(err => {\n          console.log(err);\n        });\n      }\n    },\n    async sendUser(type) {\n      if (type === \"get\") {\n        await this.$ajax.get(`test/${this.urlName}/`).then(res => {\n          console.log(res.data.data);\n          this.tableData = res.data.data;\n        }).catch(err => {\n          console.log(err);\n        });\n      } else if (type === 'post') {\n        await this.$ajax.post(`test/${this.urlName}/`, this.userInfo).then(res => {\n          console.log(res.data.data);\n        }).catch(err => {\n          console.log(err);\n        });\n      } else if (type === 'put') {\n        await this.$ajax.put(`test/${this.urlName}/${this.pk}/`, this.userInfo).then(res => {\n          console.log(res.data.data);\n        }).catch(err => {\n          console.log(err);\n        });\n      } else if (type === 'delete') {\n        await this.$ajax.delete(`test/${this.urlName}/${this.pk}/`).then(res => {\n          console.log(`已经删除了${this.pk}`);\n        }).catch(err => {\n          console.log(err);\n        });\n      }\n    }\n  },\n  computed: {\n    urlName() {\n      return this.radio2 === 'built-in' ? \"configuser\" : \"customuser\";\n    }\n  },\n  watch: {\n    chooseToken() {\n      this.$ajax.defaults.headers.common['Authorization'] = this.chooseToken === 'useToken' ? 'Token ' + sessionStorage.getItem('token') : '';\n      console.log(this.$ajax.defaults.headers.common['Authorization']);\n    }\n  }\n};","map":{"version":3,"names":["nanoid","name","data","radio1","radio2","get_key_value","id","key","value","inputarea","tableData","userInfo","password","username","pk","chooseToken","mounted","methods","oprKV","type","len","length","push","pop","$nextTick","$refs","focus","send","getInfo","forEach","index","array","slice","console","log","$ajax","get","then","res","catch","err","post","sendUser","urlName","put","delete","computed","watch","defaults","headers","common","sessionStorage","getItem"],"sources":["src/components/Test.vue"],"sourcesContent":["<template>\r\n    <div>\r\n        <el-card>\r\n            <el-radio-group v-model=\"chooseToken\">\r\n                <el-radio label=\"useToken\"></el-radio>\r\n                <el-radio label=\"nouseToken\"></el-radio>\r\n            </el-radio-group>\r\n            <el-header style=\"margin-left:-20px;\"><h2>\r\n                这是一个测试前后端交互的接口\r\n            </h2></el-header>\r\n            <el-container>\r\n                <el-aside width=\"500px\">\r\n                    <el-row style=\"margin-bottom: 20px;\">\r\n                        <el-radio-group v-model=\"radio1\" class=\"ml-4\">\r\n                            <el-radio label=\"get\" size=\"large\"></el-radio>\r\n                            <el-radio label=\"post\" size=\"large\"></el-radio>\r\n                        </el-radio-group>\r\n                    </el-row>\r\n                    <el-button icon=\"el-icon-plus\" size=\"large\"\r\n                    @click=\"oprKV('add');\"></el-button>\r\n                    <span v-for=\"item in get_key_value\" :key=\"item.id\" style=\"margin:0px 5px 0px 5px\" >\r\n                        <el-input style=\"width:50px;vertical-align:middle;\" placeholder=\"key\" v-model=\"item.key\" :ref=\"`input${item.id}`\" />\r\n                        <span style=\"font-size:20px;vertical-align:middle;margin:0px 5px 0px 5px\">:</span>\r\n                        <el-input style=\"width:50px;vertical-align:middle;\" placeholder=\"value\" v-model=\"item.value\"/>\r\n                    </span>\r\n                    <el-button icon=\"el-icon-minus\" size=\"large\" @click=\"oprKV('remove')\"></el-button>\r\n                </el-aside>\r\n                <el-main>\r\n                    <el-input type=\"textarea\" style=\"height:70px;\" v-model=\"inputarea\" />\r\n                </el-main>\r\n            </el-container>\r\n\r\n            <el-container>\r\n                <el-footer>\r\n                    <el-button type=\"info\" @click=\"send\">send</el-button>\r\n                </el-footer>\r\n            </el-container>\r\n            <el-container>\r\n                <el-header style=\"margin-left:-20px;\"><h2>\r\n                    这是一个测试数据库的接口\r\n                </h2></el-header>\r\n                <el-container>\r\n                    <el-aside width=\"500px\">\r\n                        <div style=\"margin:20px 0px 10px 0px\">\r\n                            <el-radio-group v-model=\"radio2\" class=\"ml-4\">\r\n                                <el-radio label=\"built-in\" size=\"large\"></el-radio>\r\n                                <el-radio label=\"customized\" size=\"large\"></el-radio>\r\n                            </el-radio-group>\r\n                        </div>\r\n\r\n                        <el-button type=\"info\" style=\"margin-top:20px;\"  @click=\"sendUser('get')\">send GET</el-button>\r\n                        <el-button type=\"info\" style=\"margin-top:20px;\"  @click=\"sendUser('post')\">send POST</el-button>\r\n                        <el-button type=\"info\" style=\"margin-top:20px;\"  @click=\"sendUser('put')\">send PUT</el-button>\r\n                        <el-button type=\"info\" style=\"margin-top:20px;\"  @click=\"sendUser('delete')\">send DELETE</el-button>\r\n                        \r\n                        <el-row>\r\n                            <el-col><h3>id</h3></el-col>\r\n                            <el-col><el-input style=\"width:230px;\" v-model=\"pk\"/></el-col>\r\n                        </el-row>\r\n                        <el-row>\r\n                            <el-col><h3>password</h3></el-col>\r\n                            <el-col><el-input style=\"width:230px;\" v-model=\"userInfo.password\" type=\"password\"  /></el-col>\r\n                        </el-row>\r\n                        <el-row>\r\n                            <el-col><h3>username</h3></el-col>\r\n                            <el-col><el-input style=\"width:230px;\" v-model=\"userInfo.username\"  /></el-col>\r\n                        </el-row>\r\n                    </el-aside>\r\n    \r\n                    <el-main>\r\n                        <el-table :data=\"tableData\">\r\n                            <el-table-column prop=\"id\" label=\"id\"></el-table-column>\r\n                            <el-table-column prop=\"password\" label=\"password\"></el-table-column>\r\n                            <el-table-column prop=\"username\" label=\"username\"></el-table-column>\r\n                        </el-table>\r\n                    </el-main>\r\n\r\n                </el-container>\r\n            </el-container>\r\n\r\n\r\n        </el-card>\r\n    </div>\r\n</template>\r\n<script>\r\nimport {nanoid} from 'nanoid'\r\nexport default {\r\n    name:'Test',\r\n    data(){\r\n        return {\r\n            radio1:\"get\",\r\n            radio2:\"built-in\",\r\n            get_key_value:[{id:nanoid(),key:\"k1\",value:\"v1\"}],\r\n            inputarea:\"\",\r\n            tableData:[],\r\n            userInfo:{password:\"123456\",username:\"root\"},\r\n            pk:1,\r\n            chooseToken:\"useToken\",\r\n        }\r\n    },\r\n    mounted:{\r\n        \r\n    },\r\n    methods:{\r\n        oprKV(type){\r\n            const len=this.get_key_value.length+1;\r\n            if(type==='add'){\r\n                this.get_key_value.push({id:nanoid(),key:`k${len}`,value:`v${len}`})\r\n            }else{\r\n                this.get_key_value.pop(-1);\r\n            }\r\n            // console.log( this.$refs[`input${this.get_key_value[0].id}`])\r\n            // Object.values(this.$refs)[1].focus()\r\n            this.$nextTick(()=>{\r\n                this.$refs[`input${this.get_key_value[len-1].id}`][0].focus()\r\n            })\r\n        },\r\n        async send(){\r\n            if(this.radio1==='get'){\r\n                let getInfo=\"\"\r\n                this.get_key_value.forEach((value,index,array)=>{\r\n                    getInfo+=`${value.key}=${value.value}&`\r\n                })\r\n                getInfo=getInfo.slice(0,getInfo.length-1)\r\n                console.log(getInfo)\r\n                await this.$ajax\r\n                .get(`/test/son?${getInfo}`)\r\n                .then(res=>{console.log(res.data.data);this.inputarea=res.data.data})\r\n                .catch(err=>{console.log(err)});\r\n            }else{\r\n                let getInfo={}\r\n                this.get_key_value.forEach((value,index,array)=>{\r\n                    getInfo[value.key]=value.value;\r\n                })\r\n                console.log(getInfo);\r\n                await this.$ajax\r\n                .post('/test/son/',getInfo)\r\n                .then(res=>{console.log(res.data.data);this.inputarea=res.data.data})\r\n                .catch(err=>{console.log(err)});\r\n            }\r\n\r\n        },\r\n        async sendUser(type){\r\n            if(type===\"get\"){\r\n                await this.$ajax\r\n                .get(`test/${this.urlName}/`)\r\n                .then(res=>{\r\n                    console.log(res.data.data);\r\n                    this.tableData=res.data.data;\r\n                })\r\n                .catch(err=>{console.log(err)})\r\n            }else if(type==='post'){\r\n                await this.$ajax\r\n                .post(`test/${this.urlName}/`,this.userInfo)\r\n                .then(res=>{\r\n                    console.log(res.data.data)\r\n                })\r\n                .catch(err=>{console.log(err)})\r\n            }else if(type==='put'){\r\n                await this.$ajax\r\n                .put(`test/${this.urlName}/${this.pk}/`,this.userInfo)\r\n                .then(res=>{\r\n                    console.log(res.data.data)\r\n                })\r\n                .catch(err=>{console.log(err)})\r\n            }else if(type==='delete'){\r\n                await this.$ajax\r\n                .delete(`test/${this.urlName}/${this.pk}/`)\r\n                .then(res=>{\r\n                    console.log(`已经删除了${this.pk}`)\r\n                })\r\n                .catch(err=>{console.log(err)})\r\n            }\r\n\r\n        },\r\n\r\n    },\r\n    computed:{\r\n        urlName(){\r\n          return (this.radio2==='built-in')?\"configuser\":\"customuser\";\r\n        },\r\n    },\r\n    watch:{\r\n        chooseToken(){\r\n            this.$ajax.defaults.headers.common['Authorization']=(this.chooseToken==='useToken')?'Token '+sessionStorage.getItem('token'):''\r\n            console.log(this.$ajax.defaults.headers.common['Authorization'])\r\n        }\r\n    }\r\n    \r\n}\r\n</script>\r\n<style lang=\"css\">\r\n    \r\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}