{"ast":null,"code":"import axios from 'axios';\n// let token = document.cookie;\n// axios.defaults.withCredentials=true\n// AUTH_TOKEN=sessionStorage.token\naxios.defaults.baseURL = 'http://localhost:8000';\n// axios.defaults.withCredentials = true;\n// axios.interceptors.request.use((config) => {\n//   config.headers['X-Requested-With'] = 'XMLHttpRequest';\n//   config.headers['X-CSRFToken'] = cookie.parse(document.cookie).csrftoken;\n//   console.log(config.headers['X-CSRFToken'])\n//   config.headers['X-CSRFToken'] = localStorage.token;\n//   return config\n// });\n\n// axios.defaults.headers.common['Authorization'] = AUTH_TOKEN;\n// axios.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded';\nexport default {\n  name: 'Test',\n  data() {\n    return {\n      content: \"\",\n      userinfo: {\n        username: \"\",\n        password: \"\"\n      }\n    };\n  },\n  methods: {\n    sendInput() {\n      const datas = {\n        info: JSON.stringify(this.content)\n      };\n      axios.post('opr/', datas).then(res => {\n        console.log(res);\n      }).catch(err => {\n        console.log(err);\n      });\n      // console.log('test')\n    },\n\n    submits() {\n      console.log(JSON.stringify(this.userinfo));\n      axios.post('/setuser/', this.userinfo).then(res => {\n        // console.log(res)\n        res.data.token;\n        axios.defaults.headers.common['Authorization'] = 'Token ' + res.data.token;\n      }).catch(err => {\n        console.log(err);\n      });\n    }\n  }\n};","map":{"version":3,"names":["axios","defaults","baseURL","name","data","content","userinfo","username","password","methods","sendInput","datas","info","JSON","stringify","post","then","res","console","log","catch","err","submits","token","headers","common"],"sources":["src/components/Test.vue"],"sourcesContent":["<template>\r\n    <div>\r\n        <br />\r\n        一段密文:<input type=\"text\" v-model=\"content\"/><br /><br />\r\n        <button @click=\"sendInput\">点击发送一个请求</button>\r\n        <h2>username</h2>\r\n        <input type=\"text\" v-model=\"userinfo.username\" name=\"username\"/>\r\n        <h2>password</h2>\r\n        <input type=\"password\" v-model=\"userinfo.password\" name=\"password\" />\r\n        <h2><button @click=\"submits\">提交</button></h2>\r\n    </div>\r\n</template>\r\n<script>\r\nimport axios from 'axios'\r\n// let token = document.cookie;\r\n// axios.defaults.withCredentials=true\r\n// AUTH_TOKEN=sessionStorage.token\r\naxios.defaults.baseURL = 'http://localhost:8000';\r\n// axios.defaults.withCredentials = true;\r\n// axios.interceptors.request.use((config) => {\r\n//   config.headers['X-Requested-With'] = 'XMLHttpRequest';\r\n//   config.headers['X-CSRFToken'] = cookie.parse(document.cookie).csrftoken;\r\n//   console.log(config.headers['X-CSRFToken'])\r\n//   config.headers['X-CSRFToken'] = localStorage.token;\r\n//   return config\r\n// });\r\n\r\n// axios.defaults.headers.common['Authorization'] = AUTH_TOKEN;\r\n// axios.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded';\r\nexport default {\r\n    name:'Test',\r\n    data(){\r\n        return {\r\n            content:\"\",\r\n            userinfo:{\r\n                username:\"\",\r\n                password:\"\",\r\n            },\r\n        }\r\n    },\r\n    methods:{\r\n        sendInput(){\r\n            const datas={\r\n                info:JSON.stringify(this.content),\r\n            }\r\n            axios\r\n            .post('opr/',datas)\r\n            .then(res=>{\r\n                console.log(res)\r\n            })\r\n            .catch(err=>{\r\n                console.log(err)\r\n            })\r\n            // console.log('test')\r\n\r\n        },\r\n        submits(){\r\n            console.log(JSON.stringify(this.userinfo));\r\n            axios\r\n            .post('/setuser/',this.userinfo)\r\n            .then(res=>{\r\n                // console.log(res)\r\n                res.data.token\r\n                axios.defaults.headers.common['Authorization']='Token '+res.data.token\r\n            })\r\n            .catch(err=>{\r\n                console.log(err)\r\n            })\r\n        }\r\n    },\r\n}\r\n</script>\r\n<style lang=\"css\">\r\n    \r\n</style>"],"mappings":"AAaA,OAAAA,KAAA;AACA;AACA;AACA;AACAA,KAAA,CAAAC,QAAA,CAAAC,OAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,OAAA;MACAC,QAAA;QACAC,QAAA;QACAC,QAAA;MACA;IACA;EACA;EACAC,OAAA;IACAC,UAAA;MACA,MAAAC,KAAA;QACAC,IAAA,EAAAC,IAAA,CAAAC,SAAA,MAAAT,OAAA;MACA;MACAL,KAAA,CACAe,IAAA,SAAAJ,KAAA,EACAK,IAAA,CAAAC,GAAA;QACAC,OAAA,CAAAC,GAAA,CAAAF,GAAA;MACA,GACAG,KAAA,CAAAC,GAAA;QACAH,OAAA,CAAAC,GAAA,CAAAE,GAAA;MACA;MACA;IAEA;;IACAC,QAAA;MACAJ,OAAA,CAAAC,GAAA,CAAAN,IAAA,CAAAC,SAAA,MAAAR,QAAA;MACAN,KAAA,CACAe,IAAA,mBAAAT,QAAA,EACAU,IAAA,CAAAC,GAAA;QACA;QACAA,GAAA,CAAAb,IAAA,CAAAmB,KAAA;QACAvB,KAAA,CAAAC,QAAA,CAAAuB,OAAA,CAAAC,MAAA,+BAAAR,GAAA,CAAAb,IAAA,CAAAmB,KAAA;MACA,GACAH,KAAA,CAAAC,GAAA;QACAH,OAAA,CAAAC,GAAA,CAAAE,GAAA;MACA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}