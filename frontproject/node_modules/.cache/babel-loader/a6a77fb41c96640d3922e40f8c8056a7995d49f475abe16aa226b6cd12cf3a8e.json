{"ast":null,"code":"export default {\n  name: \"Mychat\",\n  data() {\n    return {\n      textcontent: \"\",\n      gptcontent: \"\",\n      gptcontent_in: \"\",\n      isLoading: false,\n      isStopping: false,\n      num: 0,\n      url: \"https://pic.52112.com/2019/06/06/JPS-190606_155/24poJOgl7m_small.jpg\",\n      srcList: [\"https://cn.bing.com/images/search?view=detailV2&ccid=iNCJT9OS&id=3F69E46012CD4A8A6E7A2C738B11F4701291EF00&thid=OIP.iNCJT9OS8Iv2yQnOVR-1NgHaHa&mediaurl=https%3a%2f%2fpic.52112.com%2f2019%2f06%2f06%2fJPS-190606_155%2f24poJOgl7m_small.jpg&exph=800&expw=800&q=%e5%b0%8f%e7%8c%ab&simid=608028985841381185&FORM=IRPRST&ck=46721289F457EC5978F6AB796BB2F36F&selectedIndex=0&ajaxhist=0&ajaxserp=0\"]\n    };\n  },\n  methods: {\n    async geText() {\n      console.log('您正在向chatgpt发送内容...');\n      let num = 0;\n      await this.$ajax.get(`/test/getchat?question=${this.textcontent}&isinit=true`).then(res => {\n        console.log(res.data.data);\n        this.gptcontent = res.data.data;\n      }).catch(err => {\n        console.log(err);\n      });\n      this.isLoading = false;\n      this.isStopping = false;\n      this.interval = setInterval(() => {\n        if (!this.isStopping) {\n          this.$ajax.get(`/test/getchat?question=${this.textcontent}&isinit='false'`).then(res => {\n            this.gptcontent_in += res.data.data;\n            this.isLoading = true;\n          }).catch(err => {\n            this.isStopping = true;\n            console.log(err);\n          });\n        }\n        if (this.isLoading) {\n          const icontent = this.gptcontent_in.slice(this.num, this.num + 1);\n          if (icontent === \"*****stop*****\") {\n            clearInterval(this.interval);\n          }\n          this.gptcontent += icontent;\n          this.num++;\n        }\n      }, 100);\n    }\n  }\n};","map":{"version":3,"names":["name","data","textcontent","gptcontent","gptcontent_in","isLoading","isStopping","num","url","srcList","methods","geText","console","log","$ajax","get","then","res","catch","err","interval","setInterval","icontent","slice","clearInterval"],"sources":["src/components/Mychat.vue"],"sourcesContent":["<template>\r\n    <div>\r\n        <h1>Mychat</h1>\r\n        <el-container style=\"margin-left: 100px;;\">\r\n            <el-aside style=\"height:8=1000px;background-color: rgb(255, 255, 255);overflow: hidden;\">\r\n                <el-menu\r\n                    default-active=\"1\"\r\n                    class=\"el-menu-vertical-demo\"\r\n                    @open=\"handleOpen\"\r\n                    @close=\"handleClose\"\r\n                    background-color=\"#545c64\"\r\n                    text-color=\"#fff\"\r\n                    active-text-color=\"#ffd04b\"\r\n                    style=\"width:99%;height:800px;\">\r\n                    <el-menu-item index=\"1\" class=\"el-menu-item\">\r\n                        <i class=\"el-icon-zoom-in\" style=\"font-size: 30px;\"></i>\r\n                        <span slot=\"title\"\"> 功能1</span>\r\n                    </el-menu-item>\r\n\r\n                    <el-menu-item index=\"2\" class=\"el-menu-item\">\r\n                        <i class=\"el-icon-menu\" style=\"font-size: 30px;\"></i>\r\n                        <span slot=\"title\"> 功能2</span>\r\n                    </el-menu-item>\r\n\r\n                    <el-menu-item index=\"3\" class=\"el-menu-item\">\r\n                        <i class=\"el-icon-document\" style=\"font-size: 30px;\"></i>\r\n                        <span slot=\"title\"> 功能3</span>\r\n                    </el-menu-item>\r\n\r\n                    <el-menu-item index=\"4\" class=\"el-menu-item\">\r\n                        <i class=\"el-icon-setting\" style=\"font-size: 30px;\"></i>\r\n                        <span slot=\"title\"> 功能4</span>\r\n                    </el-menu-item>\r\n                </el-menu>\r\n            </el-aside>\r\n            <el-main style=\"padding:0px;padding-left:20px;\">\r\n                <el-image\r\n                style = \"width:100px;height:100px;\"\r\n                :src = \"url\"\r\n                :preview-src-list = \"srcList\">\r\n                </el-image>\r\n            </el-main>\r\n        </el-container>\r\n        <el-row>\r\n            <el-col :span=\"8\"><el-input v-model = \"textcontent\"/></el-col>\r\n            <el-col :span=\"8\" style=\"position: absolute;right: 100px\"><el-button  @click=\"geText\">点击请求</el-button></el-col>\r\n        </el-row>\r\n\r\n        <el-row>\r\n            <el-col :span=\"16\"><el-input type=\"textarea\" v-model = \"gptcontent\"/></el-col>\r\n        </el-row>\r\n    </div>\r\n</template>\r\n<script>\r\nexport default {\r\n    name : \"Mychat\",\r\n    data(){\r\n        return {\r\n            textcontent:\"\",\r\n            gptcontent:\"\",\r\n            gptcontent_in:\"\",\r\n            isLoading:false,\r\n            isStopping:false,\r\n            num:0,\r\n            url : \"https://pic.52112.com/2019/06/06/JPS-190606_155/24poJOgl7m_small.jpg\",\r\n            srcList : [\"https://cn.bing.com/images/search?view=detailV2&ccid=iNCJT9OS&id=3F69E46012CD4A8A6E7A2C738B11F4701291EF00&thid=OIP.iNCJT9OS8Iv2yQnOVR-1NgHaHa&mediaurl=https%3a%2f%2fpic.52112.com%2f2019%2f06%2f06%2fJPS-190606_155%2f24poJOgl7m_small.jpg&exph=800&expw=800&q=%e5%b0%8f%e7%8c%ab&simid=608028985841381185&FORM=IRPRST&ck=46721289F457EC5978F6AB796BB2F36F&selectedIndex=0&ajaxhist=0&ajaxserp=0\"],\r\n        }\r\n    },\r\n    methods:{\r\n        async geText(){\r\n            console.log('您正在向chatgpt发送内容...');\r\n            let num = 0;\r\n            await this.$ajax\r\n            .get(`/test/getchat?question=${this.textcontent}&isinit=true`)\r\n            .then(res=>{\r\n                console.log(res.data.data);\r\n                this.gptcontent = res.data.data;\r\n            })\r\n            .catch(err=>{\r\n                console.log(err);\r\n            })\r\n            this.isLoading = false;\r\n            this.isStopping = false;\r\n            this.interval = setInterval(() => {\r\n                if(!this.isStopping){\r\n                    this.$ajax\r\n                    .get(`/test/getchat?question=${this.textcontent}&isinit='false'`)\r\n                    .then(res=>{\r\n                        this.gptcontent_in+=res.data.data;\r\n                        this.isLoading = true;\r\n                    })\r\n                    .catch(err=>{\r\n                        this.isStopping = true;\r\n                        console.log(err);\r\n                    })\r\n                }\r\n\r\n                if(this.isLoading){\r\n                    const icontent=this.gptcontent_in.slice(this.num,this.num+1);\r\n                    if(icontent ===  \"*****stop*****\"){\r\n                        clearInterval(this.interval)\r\n                    }\r\n                    this.gptcontent+=icontent;\r\n                    this.num ++;\r\n                }\r\n\r\n            }, 100);\r\n\r\n\r\n\r\n        }\r\n    }\r\n}\r\n</script>\r\n<style lang=\"css\" scoped>\r\n    .el-menu-vertical-demo{\r\n        text-align: center;\r\n        line-height: 200px;\r\n    }\r\n    .el-menu-item{\r\n        height: 200px;\r\n        line-height: 200px;\r\n        font-size: 20px;\r\n    }\r\n    .el-menu-item:focus{\r\n        font-size:30px;\r\n        background-color: rgb(13, 157, 59);\r\n    }\r\n</style>"],"mappings":"AAsDA;EACAA,IAAA;EACAC,KAAA;IACA;MACAC,WAAA;MACAC,UAAA;MACAC,aAAA;MACAC,SAAA;MACAC,UAAA;MACAC,GAAA;MACAC,GAAA;MACAC,OAAA;IACA;EACA;EACAC,OAAA;IACA,MAAAC,OAAA;MACAC,OAAA,CAAAC,GAAA;MACA,IAAAN,GAAA;MACA,WAAAO,KAAA,CACAC,GAAA,gCAAAb,WAAA,gBACAc,IAAA,CAAAC,GAAA;QACAL,OAAA,CAAAC,GAAA,CAAAI,GAAA,CAAAhB,IAAA,CAAAA,IAAA;QACA,KAAAE,UAAA,GAAAc,GAAA,CAAAhB,IAAA,CAAAA,IAAA;MACA,GACAiB,KAAA,CAAAC,GAAA;QACAP,OAAA,CAAAC,GAAA,CAAAM,GAAA;MACA;MACA,KAAAd,SAAA;MACA,KAAAC,UAAA;MACA,KAAAc,QAAA,GAAAC,WAAA;QACA,UAAAf,UAAA;UACA,KAAAQ,KAAA,CACAC,GAAA,gCAAAb,WAAA,mBACAc,IAAA,CAAAC,GAAA;YACA,KAAAb,aAAA,IAAAa,GAAA,CAAAhB,IAAA,CAAAA,IAAA;YACA,KAAAI,SAAA;UACA,GACAa,KAAA,CAAAC,GAAA;YACA,KAAAb,UAAA;YACAM,OAAA,CAAAC,GAAA,CAAAM,GAAA;UACA;QACA;QAEA,SAAAd,SAAA;UACA,MAAAiB,QAAA,QAAAlB,aAAA,CAAAmB,KAAA,MAAAhB,GAAA,OAAAA,GAAA;UACA,IAAAe,QAAA;YACAE,aAAA,MAAAJ,QAAA;UACA;UACA,KAAAjB,UAAA,IAAAmB,QAAA;UACA,KAAAf,GAAA;QACA;MAEA;IAIA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}